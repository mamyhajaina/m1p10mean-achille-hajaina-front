<div class="wrapper">
    <div class="container container-panier">
        <br>
        <div class="card">
            <p-table #dt2 [value]="rendezVous" dataKey="id" [rows]="10" [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true"
                [globalFilterFields]="['Service.name', 'country.name', 'Service.prix', 'status']"
                [tableStyle]="{ 'min-width': '75rem', 'min-height': minHeight  }">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width:22%">Prestation</th>
                        <th style="width:22%">Employeur</th>
                        <th style="width:15%">Prix</th>
                        <th style="width:15%">Reste</th>
                        <th style="width:22%">Status</th>
                        <th style="width:12%">Verifié</th>
                    </tr>
                    <tr>
                        <th>
                            <p-columnFilter type="text" field="Service.name" [showMenu]="false"
                                matchMode="contains"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="text" field="country.name" [showMenu]="false"
                                matchMode="contains"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter field="Service.prix" matchMode="contains" [showMenu]="false">
                            </p-columnFilter>
                        </th>
                        <th>
                        </th>
                        <th>
                            <p-columnFilter field="status" matchMode="contains" [showMenu]="false">
                                <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                    <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)"
                                        placeholder="Any" [showClear]="true">
                                        <ng-template let-option pTemplate="item">
                                            <p-tag [value]="option.value" [severity]="option.serverity"></p-tag>
                                        </ng-template>
                                    </p-dropdown>
                                </ng-template>
                            </p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="boolean" field="verified"></p-columnFilter>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-customer>
                    <tr>
                        <td>
                            {{ customer.Service.name }}
                        </td>
                        <td>
                            <span *ngIf="customer.Employe === null">Sans employé</span>
                            <span class="ml-1 vertical-align-middle" *ngIf="customer.Employe !== null">{{
                                customer.Employe.username }}</span>
                        </td>
                        <td>
                            {{customer.Service.prix}} Ar
                        </td>
                        <td>
                            {{customer.Service.prix - customer.payer}} Ar
                        </td>
                        <td *ngIf="customer.etat[customer.etat.length-1].color === 'danger'">
                            <p-tag [value]="'Refuser'"
                                [severity]="getSeverity(customer.etat[customer.etat.length-1].color)"></p-tag>
                        </td>
                        <td *ngIf="customer.etat[customer.etat.length-1].color !== 'danger'">
                            <p-tag [value]="customer.etat[customer.etat.length-1].name"
                                [severity]="getSeverity(customer.etat[customer.etat.length-1].color)"></p-tag>
                        </td>
                        <td>
                            <i class="pi"
                                [ngClass]="{ 'text-green-500 pi-check-circle': customer.verified, 'text-red-500 pi-times-circle': !customer.verified }"></i>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="5">No customers found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
    <br>
    <footer id="footer" class="footer custom-footer">
        <div class="container">
            <div class="copyright">
                &copy; © 2024 Copyright <strong><span>ANDRIANTSITOHAINA Lahatra Mamy Hajaina</span></strong> and
                <strong><span>FANOMEZANTSOA Achille Aubin</span></strong>
            </div>
            <div class="credits" style="color: #ff6668;">
                CHARME & ÉCLAT BEAUTÉ
            </div>
        </div>
    </footer>
</div>