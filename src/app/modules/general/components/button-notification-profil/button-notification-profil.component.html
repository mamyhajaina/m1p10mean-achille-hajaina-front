<p-toast></p-toast>
<nav class="header-nav ms-auto">
  <ul class="d-flex align-items-center" *ngIf="dataUserConnected.token">

    <li class="nav-item dropdown" (mouseenter)="toggleNotifications()">

      <button class="nav-link nav-icon">
        <i class="bi bi-bell"></i>
        <span class="badge bg-primary badge-number">{{ somme }}</span>
      </button><!-- End Notification Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications"
        [ngClass]="{'show': showNotifications}"
        [style]="showNotifications ? 'position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(-25px, 35px);' : ''">
        <li class="dropdown-header">
          Vous avez {{ dataOffreSpeciale.length }} nouvelles notifications

        </li>
        <li>
          <hr class="dropdown-divider">
        </li>


        <li *ngFor="let offre of dataOffreSpeciale" class="notification-item">
          <div (click)="updateOffre(offre._id, offre)" *ngIf="offre.vue===true" class="vue-true">
            <h4>Prix {{ offre.Service.name }}</h4>
            <p>{{ offre.pourcentage }} % de remise</p>
          </div>
          <div *ngIf="offre.vue===false">
            <h4>Prix {{ offre.Service.name }}</h4>
            <p>{{ offre.pourcentage }} % de remise</p>
          </div>
        </li>
      </ul><!-- End Notification Dropdown Items -->

    </li><!-- End Notification Nav -->

    <li class="nav-item dropdown pe-3" (click)="toggleProfil()">

      <button class="nav-link nav-profile d-flex align-items-center pe-0" data-bs-toggle="dropdown">
        <img src="{{environments.url_image}}{{this.dataUserConnected.image}}" alt="Profile" class="rounded-circle">
        <span class="d-none d-md-block dropdown-toggle ps-2">{{this.dataUserConnected.username}}</span>
      </button><!-- End Profile Iamge Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile" [ngClass]="{'show': showProfil}"
        [style]="showProfil ? 'position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(-16px, 38px);' : ''">
        <li class="dropdown-header">
          <h6>{{this.dataUserConnected.username}}</h6>
          <span>{{ this.dataUserConnected.role }}</span>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="/public/profil">
            <i class="bi bi-person"></i>
            <span>Profil</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="public/porte-feuille">
            <i class="bi bi-wallet"></i>
            <span>Porte feuille</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li (click)="logout()">
          <a class="dropdown-item d-flex align-items-center" href="#">
            <i class="bi bi-box-arrow-right"></i>
            <span>Se déconnecter</span>
          </a>
        </li>

      </ul>
    </li>

  </ul>
  <ul class="d-flex align-items-center espace-btn" *ngIf="!dataUserConnected.token">
    <li class="nav-item dropdown" style="cursor: pointer;">
      <a href="/auth"
        style="font-family: 'TreatwellSansWeb,Verdana,Geneva,Arial,Helvetica,sans-serif'; color: #FF6668;">Je
        m'identifie</a>
    </li>
  </ul>
</nav>

<p-dialog header="Offres speciales" position="top" [(visible)]="visible" [modal]="true" [style]="{ width: '30vw' }"
  [draggable]="false" [resizable]="false">
  <div class="text-center">
    <p-card [style]="{ width: '360px' }">
      <p-image src="../../../../../assets/assets/img/service/{{image}}" alt="Image" width="250"></p-image>
      <ng-template pTemplate="footer">
        <p-button label="Save" icon="pi pi-check"></p-button>
        <p-button label="Cancel" icon="pi pi-times" styleClass="p-button-secondary"
          [style]="{ 'margin-left': '.5em' }"></p-button>
      </ng-template>
    </p-card>
    <br>
    <h4><b>{{name}}</b> // {{cat}}</h4><br>
    <p>
      prix avec reduction : {{prix}}
    </p>
  </div>
  <div class="text-center flex justify-content-center">
    <span class="p-input-icon-left">
      <input type="date" placeholder="montant à payer" pInputText [(ngModel)]="date" />
    </span>
  </div>
  <br>
  <div class="text-center flex justify-content-center">
    <span class="p-input-icon-left">
      <input type="time" placeholder="montant à payer" pInputText [(ngModel)]="heure" />
    </span>
  </div>
  <br>
  <div class="text-center flex flex-wrap justify-content-center gap-3">
    <span class="p-input-icon-left">
      <i class="pi pi-wallet"></i>
      <input type="number" placeholder="montant à payer" pInputText [(ngModel)]="montant" />
    </span>
  </div>
  <br><br>
  <div class="row">
    <button type="button" class="btn btn-outline-success" (click)="payer()">Success</button>
  </div>
</p-dialog>